(()=>{function e(e,o,a){return o.filter((o=>o.position===e.position)).length>=a}document.body.appendChild(function(){document.getElementById("file-selector").addEventListener("change",(o=>{const t=o.target.files;console.log(t);const r=t[0],l=new FileReader;l.onload=function(o){!function(o){console.log("RUNNING");let t=null,r=1e7,l=0;for(player of o)l+=parseFloat(player.score);const n=l/o.length;console.log(`PLAYER AVERAGE SCORE: ${n}`);const s=o.reduce(((e,o)=>{const a=e[o.position]||[];return a.push(o),e[o.position]=a,e}),{});for(position in groupArray=[],s){let e=s[position];groupArray.push(e)}groupArray.sort(((e,o)=>e.length-o.length)),console.log("GROUPS"),console.log(groupArray),console.log(`${o.length} PLAYERS`);const c=Math.floor(o.length/6);console.log(`BUILD ${c} TEAMS`);for(let o=0;o<50;o++){const a=[];for(var p=0;p<c;p++)a.push({name:`TEAM ${p+1}`,players:[],avgScore:0});let l=0;for(group of groupArray)group=group.sort((()=>Math.random()-.5)),group.forEach((o=>{const t=Math.floor(group.length/c);if(l<c){for(team of a)if(0===team.players.length){team.players.push(o),l++,team.avgScore=parseFloat(o.score);break}}else{let r=!1;for(team of a)if(team.players.length<=l/c&&(team.avgScore>n&&parseFloat(o.score)<n||team.avgScore<n&&parseFloat(o.score)>n)&&!e(o,team.players,t)){team.players.push(o),l++,r=!0;let e=0;team.players.forEach((o=>{e+=parseFloat(o.score)})),team.avgScore=e/team.players.length;break}if(!r)for(team of a)if(team.players.length<=l/c&&!e(o,team.players,t)){team.players.push(o),l++,r=!0;let e=0;team.players.forEach((o=>{e+=parseFloat(o.score)})),team.avgScore=e/team.players.length;break}if(!r)for(team of a)if(team.players.length<=l/c&&(team.avgScore>n&&parseFloat(o.score)<n||team.avgScore<n&&parseFloat(o.score)>n)){team.players.push(o),l++,r=!0;let e=0;team.players.forEach((o=>{e+=parseFloat(o.score)})),team.avgScore=e/team.players.length;break}if(!r)for(team of a)if(team.players.length<=l/c){team.players.push(o),l++;let e=0;team.players.forEach((o=>{e+=parseFloat(o.score)})),team.avgScore=e/team.players.length;break}}}));console.log(o);let s=0,m=1e5;for(team of a)team.avgScore<m&&(m=team.avgScore),team.avgScore>s&&(s=team.avgScore);const g=s-m;console.log(g),g<r&&(r=g,t=a)}for(team of(console.log(t),console.log(r),t)){for(member of(console.log(team.name),team.players))console.log(`${member.name} ${member.score}`);console.log("------------")}let m="";for(team of t){for(player of(m+=`${team.name},${team.avgScore}\n`,team.players))m+=`${player.name}\n`;m+="\n\n"}a=document.createElement("a"),a.textContent="download",a.download="teams.csv",a.href="data:text/csv;charset=utf-8,"+escape(m),document.body.appendChild(a)}(function(e,o=","){const a=e.slice(0,e.indexOf("\n")).split(o);return e.slice(e.indexOf("\n")+1).split("\n").map((function(e){const t=e.split(o);return a.reduce((function(e,o,a){return o&&t&&t[a]&&(e[o.trim()]=t[a].trim()),e}),{})}))}(o.target.result))},l.readAsText(r)}));const o=document.createElement("div");return o.innerHTML="Select the .csv file to build lineups",o}())})();